import os
import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, MessageHandler, filters, ContextTypes

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
BOT_TOKEN = os.getenv('8564008392:AAEdPESAcK8pcBPR359q2gopR9DMh1r1hXs')
ADMIN_CHAT_ID = os.getenv('7288679331')

if not BOT_TOKEN:
    raise ValueError("‚ùå BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.")
if not ADMIN_CHAT_ID:
    raise ValueError("‚ùå ADMIN_CHAT_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.")

# –ú–µ–Ω—é —Å —Ç–∏–ø–∞–º–∏ –∑–∞–∫–∞–∑–æ–≤
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ /start"""
    keyboard = [
        [InlineKeyboardButton("üåê –°–∞–π—Ç—ã", callback_data="sites")],
        [InlineKeyboardButton("ü§ñ –ë–æ—Ç—ã", callback_data="bots")],
        [InlineKeyboardButton("üé® –í–µ–±-–¥–∏–∑–∞–π–Ω", callback_data="web_design")],
        [InlineKeyboardButton("üìÅ –ü—Ä–æ—á–µ–µ", callback_data="other")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    welcome_text = """
‚ú® *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤!* ‚ú®

–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç:
"""
    await update.message.reply_text(
        welcome_text,
        reply_markup=reply_markup,
        parse_mode='Markdown'
    )

async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é"""
    query = update.callback_query
    await query.answer()
    
    project_types = {
        "sites": "üåê –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∞–π—Ç–æ–≤",
        "bots": "ü§ñ –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–æ–≤", 
        "web_design": "üé® –í–µ–±-–¥–∏–∑–∞–π–Ω",
        "other": "üìÅ –ü—Ä–æ—á–∏–µ —É—Å–ª—É–≥–∏"
    }
    
    project_type = query.data
    context.user_data['project_type'] = project_types.get(project_type, "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø")
    
    # –ö—Ä–∞—Å–∏–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–æ–µ–∫—Ç–∞
    descriptions = {
        "sites": """
üéØ *–ó–∞–∫–∞–∑ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–∞–π—Ç–∞* üåê

–ß—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Å–æ–∑–¥–∞—Ç—å –¥–ª—è –≤–∞—Å –∏–¥–µ–∞–ª—å–Ω—ã–π —Å–∞–π—Ç, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ:

üìã *–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:*
‚Ä¢ –¶–µ–ª—å —Å–∞–π—Ç–∞ (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω, –ª–µ–Ω–¥–∏–Ω–≥, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç –∏ —Ç.–¥.)
‚Ä¢ –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–µ–Ω —Ä–µ—à–∞—Ç—å —Å–∞–π—Ç

üé® *–î–∏–∑–∞–π–Ω –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:*
‚Ä¢ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –¥–∏–∑–∞–π–Ω—É (–º–∏–Ω–∏–º–∞–ª–∏–∑–º, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π)
‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏—Ö—Å—è —Å–∞–π—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)
‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

‚öôÔ∏è *–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:*
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –∫–æ—Ä–∑–∏–Ω–∞, –±–ª–æ–≥ –∏ —Ç.–¥.)
‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, —Å–æ—Ü—Å–µ—Ç–∏, CRM)
‚Ä¢ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

üí° *–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:*
‚Ä¢ –°—Ä–æ–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚Ä¢ –ë—é–¥–∂–µ—Ç (–µ—Å–ª–∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–µ—Ç–µ—Å—å)
‚Ä¢ –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è

–û–ø–∏—à–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ - —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –ø–æ–Ω—è—Ç—å –≤–∞—à–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ª—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ! ‚ú®
        """,
        "bots": """
üéØ *–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞* ü§ñ

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –±–æ—Ç–∞, —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –Ω–∞–º –æ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:

üìã *–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:*
‚Ä¢ –î–ª—è –∫–∞–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –Ω—É–∂–µ–Ω –±–æ—Ç (Telegram, WhatsApp, VK –∏ —Ç.–¥.)
‚Ä¢ –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å –±–æ—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –ø—Ä–æ–¥–∞–∂–∏)
‚Ä¢ –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –±–æ—Ç–∞

üîß *–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:*
‚Ä¢ –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, API, –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã)
‚Ä¢ –¢–∏–ø –±–æ—Ç–∞ (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π, —Å–µ—Ä–≤–∏—Å–Ω—ã–π, –∏–≥—Ä–æ–≤–æ–π)

üé® *–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:*
‚Ä¢ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –¥–∏–∑–∞–π–Ω—É –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –ø–æ—Ö–æ–∂–∏—Ö –±–æ—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)
‚Ä¢ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞

üìä *–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:*
‚Ä¢ –û–∂–∏–¥–∞–µ–º–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚Ä¢ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

üí° *–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:*
‚Ä¢ –°—Ä–æ–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚Ä¢ –ë—é–¥–∂–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞
‚Ä¢ –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è

–ß–µ–º –¥–µ—Ç–∞–ª—å–Ω–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ - —Ç–µ–º —Ç–æ—á–Ω–µ–µ –º—ã —Å–º–æ–∂–µ–º –æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–æ–µ–∫—Ç! üöÄ
        """,
        "web_design": """
üéØ *–ó–∞–∫–∞–∑ –≤–µ–±-–¥–∏–∑–∞–π–Ω–∞* üé®

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ç—Ä—è—Å–∞—é—â–µ–≥–æ –¥–∏–∑–∞–π–Ω–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –Ω–∞–º —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

üé® *–í–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è:*
‚Ä¢ –°—Ç–∏–ª—å –¥–∏–∑–∞–π–Ω–∞ (–º–∏–Ω–∏–º–∞–ª–∏–∑–º, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, —Ä–µ—Ç—Ä–æ, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π)
‚Ä¢ –¶–≤–µ—Ç–æ–≤–∞—è –≥–∞–º–º–∞ (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏–ª–∏ –±—Ä–µ–Ω–¥–±—É–∫)
‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –ø–æ–Ω—Ä–∞–≤–∏–≤—à–µ–≥–æ—Å—è –¥–∏–∑–∞–π–Ω–∞ (—Å—Å—ã–ª–∫–∏ –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã)

üìã *–û –ø—Ä–æ–µ–∫—Ç–µ:*
‚Ä¢ –¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞ (—Å–∞–π—Ç, –ª–µ–Ω–¥–∏–Ω–≥, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
‚Ä¢ –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
‚Ä¢ –ö–ª—é—á–µ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∏–∑–∞–π–Ω

üì± *–°—Ç—Ä—É–∫—Ç—É—Ä–∞:*
‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü/—ç–∫—Ä–∞–Ω–æ–≤ –¥–ª—è –¥–∏–∑–∞–π–Ω–∞
‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ –±–ª–æ–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
‚Ä¢ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

üéØ *–¶–µ–ª–∏ –¥–∏–∑–∞–π–Ω–∞:*
‚Ä¢ –ß—Ç–æ –¥–æ–ª–∂–µ–Ω —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?
‚Ä¢ –ö–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–ª–∂–µ–Ω —Å–æ–≤–µ—Ä—à–∞—Ç—å?
‚Ä¢ –ö–∞–∫–∏–µ —ç–º–æ—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å –¥–∏–∑–∞–π–Ω?

üí° *–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:*
‚Ä¢ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ (–≤–µ–±, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
‚Ä¢ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤

‚ú® *–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:*
‚Ä¢ –°—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚Ä¢ –ë—é–¥–∂–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞
‚Ä¢ –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

–í–∞—à–µ –≤–∏–¥–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º —Å–æ–∑–¥–∞—Ç—å –¥–∏–∑–∞–π–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤–∑–æ–π–¥–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è! üåü
        """,
        "other": """
üéØ *–î—Ä—É–≥–æ–π —Ç–∏–ø –∑–∞–∫–∞–∑–∞* üìÅ

–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –Ω–∞–º –æ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ:

üìã *–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:*
‚Ä¢ –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞–º –Ω—É–∂–Ω–æ?
‚Ä¢ –°—Ñ–µ—Ä–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞/–ø—Ä–æ–µ–∫—Ç–∞
‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏

üéØ *–ü—Ä–æ–±–ª–µ–º–∞/–∑–∞–¥–∞—á–∞:*
‚Ä¢ –ö–∞–∫—É—é –ø—Ä–æ–±–ª–µ–º—É –¥–æ–ª–∂–µ–Ω —Ä–µ—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç?
‚Ä¢ –ß—Ç–æ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–æ –≤–∞—Å –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–∞–º?
‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

üîß *–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã:*
‚Ä¢ –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è)
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚Ä¢ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É

üìä *–ë–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:*
‚Ä¢ –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
‚Ä¢ –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
‚Ä¢ –ë—é–¥–∂–µ—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

‚è∞ *–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏:*
‚Ä¢ –ñ–µ–ª–∞–µ–º—ã–µ —Å—Ä–æ–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚Ä¢ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞—Ç—ã/—Å–æ–±—ã—Ç–∏—è

üí° *–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:*
‚Ä¢ –û—Å–æ–±—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–ª–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è
‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –ø–æ—Ö–æ–∂–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)
‚Ä¢ –õ—é–±–∞—è –¥—Ä—É–≥–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞

–ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å–µ –¥–µ—Ç–∞–ª–∏ - —á–µ–º –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ç–µ–º –ª—É—á—à–µ –º—ã –ø–æ–π–º–µ–º –≤–∞—à–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏! üí´
        """
    }
    
    description_text = descriptions.get(project_type, """
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ. –£–∫–∞–∂–∏—Ç–µ:
‚Ä¢ –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚Ä¢ –¢—Ä–µ–±—É–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª  
‚Ä¢ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –¥–∏–∑–∞–π–Ω—É
‚Ä¢ –°—Ä–æ–∫–∏ –∏ –±—é–¥–∂–µ—Ç
‚Ä¢ –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏
    """)
    
    await query.edit_message_text(
        text=description_text,
        parse_mode='Markdown'
    )
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è
    context.user_data['waiting_for_description'] = True

async def handle_description(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    if context.user_data.get('waiting_for_description'):
        user_description = update.message.text
        context.user_data['project_description'] = user_description
        
        # –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞
        keyboard = [[InlineKeyboardButton("üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑", callback_data="send_order")]]
        reply_markup = InlineKeyboardMarkup(keyboard)
        
        await update.message.reply_text(
            "‚úÖ *–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ!*\n\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞.",
            reply_markup=reply_markup,
            parse_mode='Markdown'
        )
        
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –æ–∂–∏–¥–∞–Ω–∏—è
        context.user_data['waiting_for_description'] = False

async def send_order_to_admin(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É"""
    query = update.callback_query
    await query.answer()
    
    user = query.from_user
    project_type = context.user_data.get('project_type', '–ù–µ —É–∫–∞–∑–∞–Ω')
    project_description = context.user_data.get('project_description', '–ù–µ —É–∫–∞–∑–∞–Ω–æ')
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    order_message = f"""
üéâ *–ù–û–í–´–ô –ó–ê–ö–ê–ó!* üéâ

üë§ *–ó–∞–∫–∞–∑—á–∏–∫:* 
‚Ä¢ –ò–º—è: {user.first_name or '–ù–µ —É–∫–∞–∑–∞–Ω–æ'} {user.last_name or ''}
‚Ä¢ Username: @{user.username or '–ù–µ —É–∫–∞–∑–∞–Ω'}
‚Ä¢ ID: {user.id}

üìã *–¢–∏–ø –∑–∞–∫–∞–∑–∞:* {project_type}

üìù *–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:*
{project_description}

‚è∞ *–í—Ä–µ–º—è –∑–∞–∫–∞–∑–∞:* {query.message.date.strftime('%Y-%m-%d %H:%M:%S')}
    """
    
    try:
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
        await context.bot.send_message(
            chat_id=ADMIN_CHAT_ID,
            text=order_message,
            parse_mode='Markdown'
        )
        
        # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        await query.edit_message_text(
            text="üéä *–í–∞—à –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!* üéä\n\n–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.\n\n–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ –Ω–∞—Å! üí´",
            parse_mode='Markdown'
        )
        
        # –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        context.user_data.clear()
        
    except Exception as e:
        error_msg = f"‚ùå *–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞:* {str(e)}"
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞: {e}")
        await query.edit_message_text(text=error_msg, parse_mode='Markdown')

async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏"""
    logger.error(f"–û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ: {context.error}")
    
    if update and update.effective_chat:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text="‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
        )

def main() -> None:
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
    try:
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        application = Application.builder().token(BOT_TOKEN).build()

        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
        application.add_handler(CommandHandler("start", start))
        application.add_handler(CallbackQueryHandler(button_handler, pattern="^(sites|bots|web_design|other)$"))
        application.add_handler(CallbackQueryHandler(send_order_to_admin, pattern="^send_order$"))
        application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_description))
        
        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
        application.add_error_handler(error_handler)

        # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
        print("ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç...")
        logger.info("–ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω")
        application.run_polling()
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞: {e}")

if __name__ == "__main__":
    main()